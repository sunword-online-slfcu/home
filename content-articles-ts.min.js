/* Minified on 3/27/2024 */
"use strict";!function(){class e{constructor(e){this.articles=null,this.element=e,this.element.classList.add("articles-component")}refreshUI(){const e=this.element.querySelector(".loading-content"),t=this.element.querySelector(".no-content-message"),n=this.element.querySelector(".articles"),i=this.element.querySelector(".articles-component__button"),a=i.getAttribute("title")||"";return null===this.articles?(Alkami.Dom.showElement(e),Alkami.Dom.hideElement(t),void Alkami.Dom.hideElement(n)):0===this.articles.length?(Alkami.Dom.hideElement(e),Alkami.Dom.showElement(t),void Alkami.Dom.hideElement(n)):(Alkami.Dom.hideElement(e),Alkami.Dom.hideElement(t),Alkami.Dom.showElement(n),n.innerHTML=this.articles.map(e=>`<div class="article">\n               <h3 class="article__title"><a href="${e.url}">${e.displayName}</a></h3>\n               <span class="article__date">${e.date}</span>\n               <div class="article__content-body">${e.excerpt}</div>\n               <a class="article__callout-link" href="${e.url}">${Alkami.Localization.SiteText["Global.Content.ReadMore"]}</a>\n            </div>`).join(""),void i.setAttribute("aria-label",`${a} ${this.articles.length.toString(10)}`))}}function t(){return new Promise(e=>{$.ajax({url:"/Api/Content/GetEducationalContentImpressions",data:{currentWidget:window.currentWidgetName},dataType:"json",type:"GET",success:function(t){const n=JSON.parse(t.ContentImpressions||"[]").map(e=>({id:e.Id,date:e.Date,displayName:e.DisplayName,excerpt:e.Excerpt,url:"/Content/"+e.Id}));return e(n)},error:function(){return e([])}})})}function n(){return new Promise(e=>{$.ajax({url:"/Api/Content/GetCurrentNews",data:{currentWidget:window.currentWidgetName},dataType:"json",type:"GET",success:function(t){const n=JSON.parse(t.Content||"[]").map(e=>({id:e.Id,date:e.Date,displayName:e.DisplayName,excerpt:e.Excerpt,url:"/Content/"+e.Id}));return e(n)},error:function(){return e([])}})})}function i(t,n){const i=new e(t);let a=null;i.refreshUI(),t.addEventListener("expandend",()=>{a||(a=n().then(e=>(i.articles=e,i.refreshUI(),e)))}),Alkami.Iris.PopoverComponent.refresh(t.querySelectorAll("[data-popover]"))}function a(e,t){const n=e.querySelector("button"),i=e.querySelector(".iris-popover"),a={"data-popover":"","data-placement":"bottom","data-static-placement":"","data-indicator":"end",title:n.title,"aria-label":n.title},r=new Alkami.WidgetHeader.ActionButtonItem(Object.assign({buttonAttributes:a},t));return r.element.appendChild(i),r.element.classList.add("legacy-action-item"),r}!async function(){const e=new Promise(e=>{document.body.addEventListener("irisinitstart",()=>{const t=document.getElementById("related_content");t?(t.remove(),e(t)):e(null)})}),r=new Promise(e=>{document.body.addEventListener("widgetHeaderInitBefore",t=>e(t.detail.header))});try{const l=await e;if(!l)return;const o=(await r).actions,s=l.querySelector("#educational_articles"),c=l.querySelector("#news_articles"),d=l.querySelector("#help_articles"),m=l.querySelector("#help_articles a.help");if(s&&window.currentWidgetName){const e=a(s,{containerId:"educational_articles",iconName:"education"});o.append(e),i(e.element,t)}if(c){const e=a(c,{containerId:"news_articles",iconName:"newspaper"});o.append(e),i(e.element,n)}if(d&&m){const e=function(e){const t=e.querySelector("a.help"),n=new Alkami.WidgetHeader.ActionButtonItem({containerId:"help_articles",iconName:"help",text:t.innerText,href:t.href,buttonAttributes:{title:t.title,"aria-label":t.title}});return n.buttonElement.classList.add("help-link"),n.element.classList.add("legacy-action-item"),n}(d);o.append(e),$("#help_articles .help-link").instructify()}}catch(e){}}()}();
//# sourceMappingURL=content-articles-ts.min.js.map
