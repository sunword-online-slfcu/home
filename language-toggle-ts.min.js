/* Minified on 3/27/2024 */
"use strict";var Alkami=Alkami||{};!function(){const e=Alkami.LanguageToggle||new class{constructor(){this._localeStorageKey="alkami.locales",this._chosenLocaleIndex=-1,this._openDialog=(e,t)=>{e!==this.currentLocale&&(this._chosenLocaleIndex=t,this._dialog.open=!0)},this.GetLocales=this.getLocales,this.ResetLocales=this.resetLocales,this.SaveLocales=this.saveLocales}changeLocale(e){return new Promise(t=>{if(e.IsCurrent)return t(this._locales);$.post("/API/Locales/SetLocale",{localeId:e.Id},()=>(this._locales.forEach(t=>t.IsCurrent=t.Id===e.Id),this.saveLocales(this._locales),Alkami.WidgetNav&&(Alkami.WidgetNav.ResetWidgetNav(),Alkami.WidgetNav.ResetWidgetTitleBars()),t(this._locales)))})}saveLocales(e){Alkami.Utils.StorageHelper.hasLocalStorage()&&e&&e.length&&(localStorage[this._localeStorageKey]=JSON.stringify(e))}getLocales(e){return new Promise(e=>{if(Alkami.Utils.StorageHelper.hasLocalStorage()&&localStorage[this._localeStorageKey]){const t=JSON.parse(localStorage[this._localeStorageKey]);return e(t)}$.get("/API/Locales",t=>{const a=t;Alkami.LanguageToggle.SaveLocales(a),e(a)},"json")}).then(t=>(this._locales=t,e&&e(t),Alkami.Dom.dispatchEvent(document.documentElement,"localesLoaded"),t))}resetLocales(){Alkami.Utils.StorageHelper.hasLocalStorage()&&localStorage[this._localeStorageKey]&&localStorage.removeItem(this._localeStorageKey)}async refreshUI(){const e=document.getElementById("language_toggle");if(!e)return;this._languageItemTemplateElement||(this._languageItemTemplateElement=document.getElementById("language_item_template")),Alkami.Dom.removeChildNodes(e),e.innerHTML="";const t=await this.getLocales();e.setAttribute("data-locale-count",t.length.toString(10)),t.length>1?Alkami.Dom.showElement(e):Alkami.Dom.hideElement(e),t.forEach((t,a)=>{const l=this._languageItemTemplateElement.cloneNode(!0);l.id="language_toggle_link"+a,l.href="#",l.classList.add(t.IsCurrent?"current":"not-active"),l.innerHTML=l.innerHTML.replace("$language_item_name$",t.Language),l.addEventListener("click",e=>{e.preventDefault(),this._openDialog(t,a)}),l.addEventListener("keydown",e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),this._openDialog(t,a))}),e.appendChild(l)})}get locales(){return this._locales}get currentLocale(){return this._locales.find(e=>e.IsCurrent)}get chosenLocale(){return this._locales[this._chosenLocaleIndex]||null}get _dialog(){return this.__dialog||(this.__dialog=Alkami.Helpers.createDialog({buttons:[{text:Alkami.Localization.SiteText["Desktop.Menu.LocaleConfirmation.CancelButton"],type:"secondary",handlerName:"cancel",closePrompt:!0},{text:Alkami.Localization.SiteText["Desktop.Menu.LocaleConfirmation.ConfirmButton"],handlerName:"confirm",closePrompt:!1}],cls:"language-toggle-modal",content:`<div id="language_toggle_modal_description">\n\t\t\t\t\t\t<p>${Alkami.Localization.SiteText["Desktop.Menu.LocaleConfirmation.Description"]}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="loader-container" id="language_toggle_modal_changing_description">\n\t\t\t\t\t\t<div class="loader"></div>\n\t\t\t\t\t\t<p>${Alkami.Localization.SiteText["Desktop.Menu.LocaleConfirmation.LoaderDescription"]}</p>\n\t\t\t\t\t</div>`,handlers:{confirm:()=>{const e=document.getElementById("language_toggle_modal_description"),t=document.getElementById("language_toggle_modal_changing_description");Alkami.Dom.hideElement(e),Alkami.Dom.showElement(t),Array.from(this.__dialog.element.querySelectorAll("button")).forEach(e=>{e.disabled=!0}),this.changeLocale(this.chosenLocale).then(()=>{location.reload()})}},id:"language_toggle_modal",title:Alkami.Localization.SiteText["Desktop.Menu.LocaleConfirmation.Title"]}),this.__dialog.element.addEventListener("iris.prompt.opening",()=>{const e=document.getElementById("language_toggle_modal_description"),t=document.getElementById("language_toggle_modal_changing_description");Alkami.Dom.hideElement(t),Alkami.Dom.showElement(e),Array.from(this.__dialog.element.querySelectorAll("button")).forEach(e=>{e.disabled=!1})})),this.__dialog}};Alkami.LanguageToggle=e,Alkami.Dom.onDocumentReady(()=>{const t=document.getElementById("language_toggle");t&&(t.setAttribute("data-locale-count","0"),Alkami.Dom.hideElement(t),e.refreshUI())})}();
//# sourceMappingURL=language-toggle-ts.min.js.map
